# Claude Behavior Guidelines for ffai

## Python Virtual Environment

This repo uses a virtual environment at `.venv/`. Always use it when running Python commands:

```bash
.venv/bin/python   # instead of python / python3
.venv/bin/pip      # instead of pip
```

The package is installed in editable mode (`pip install -e ffai/`), so source changes in `ffai/src/` take effect immediately without reinstalling.

PufferLib is installed from source at `/home/dave/code/public/PufferLib/` (required for PyTorch ABI compatibility — do not install from PyPI).

## Data Directory Convention

- `ffai/src/ffai/data/favrefignewton/` — files downloaded directly from ESPN. Never modify these; only append new years.
- `ffai/src/ffai/data/nflverse/` — files downloaded from nflverse via nflreadpy. Never modify; re-run `scripts/fetch_nfl_data.py` to update.
- `ffai/src/ffai/data/favrefignewton_processed/` — files derived from raw data (joins, aggregations, feature engineering). Generated by `scripts/build_features.py`; reproducible from raw.

All three directories are gitignored (local only). When adding a processing step, write a script that reads from `favrefignewton/` or `nflverse/` and writes to `favrefignewton_processed/` so the transformation is auditable.

## Plans

Whenever a plan is created for this project, save it as a markdown file in the `plans/` directory using the format:

```
plans/YYYY-MM-DD_{short description}.md
```

Example: `plans/2026-02-18_rl-training-refactor.md`
